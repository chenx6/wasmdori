import{A as e,h as a,x as r,m as t,b as n,f as o,k as s,y as l,C as c,I as i,w as u}from"./utils.e62c8964.ccd815aa.js";var p=Object.defineProperty,f=Object.defineProperties,d=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,w=(e,a,r)=>a in e?p(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,v=(e,a)=>{for(var r in a||(a={}))b.call(a,r)&&w(e,r,a[r]);if(g)for(var r of g(a))m.call(a,r)&&w(e,r,a[r]);return e},h=(e,a)=>f(e,d(a));const y={};let _,j=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});j.decode();let B=null;function C(){return null!==B&&B.buffer===_.memory.buffer||(B=new Uint8Array(_.memory.buffer)),B}function O(e,a){return j.decode(C().subarray(e,e+a))}const x=new Array(32).fill(void 0);x.push(void 0,null,!0,!1);let P=x.length;function k(e){P===x.length&&x.push(x.length+1);const a=P;return P=x[a],x[a]=e,a}function A(e){return x[e]}let I=0,F=new TextEncoder("utf-8");const S="function"==typeof F.encodeInto?function(e,a){return F.encodeInto(e,a)}:function(e,a){const r=F.encode(e);return a.set(r),{read:e.length,written:r.length}};function T(e,a,r){if(void 0===r){const r=F.encode(e),t=a(r.length);return C().subarray(t,t+r.length).set(r),I=r.length,t}let t=e.length,n=a(t);const o=C();let s=0;for(;s<t;s++){const a=e.charCodeAt(s);if(a>127)break;o[n+s]=a}if(s!==t){0!==s&&(e=e.slice(s)),n=r(n,t,t=s+3*e.length);const a=C().subarray(n+s,n+t);s+=S(e,a).written}return I=s,n}let R=null;function W(){return null!==R&&R.buffer===_.memory.buffer||(R=new Int32Array(_.memory.buffer)),R}function E(e){const a=A(e);return(r=e)<36||(x[r]=P,P=r),a;var r}let N=32;function q(e){if(1==N)throw new Error("out of js stack");return x[--N]=e,N}!async function e(a){void 0===a&&(a=new URL("wasmdori_bg.wasm",y.url));const r={wbg:{}};r.wbg.__wbindgen_json_parse=function(e,a){return k(JSON.parse(O(e,a)))},r.wbg.__wbindgen_json_serialize=function(e,a){const r=A(a);var t=T(JSON.stringify(void 0===r?null:r),_.__wbindgen_malloc,_.__wbindgen_realloc),n=I;W()[e/4+1]=n,W()[e/4+0]=t},r.wbg.__wbg_new_59cb74e423758ede=function(){return k(new Error)},r.wbg.__wbg_stack_558ba5917b466edd=function(e,a){var r=T(A(a).stack,_.__wbindgen_malloc,_.__wbindgen_realloc),t=I;W()[e/4+1]=t,W()[e/4+0]=r},r.wbg.__wbg_error_4bb6c2a97407129a=function(e,a){try{console.error(O(e,a))}finally{_.__wbindgen_free(e,a)}},r.wbg.__wbindgen_object_drop_ref=function(e){E(e)},("string"==typeof a||"function"==typeof Request&&a instanceof Request||"function"==typeof URL&&a instanceof URL)&&(a=fetch(a));const{instance:t,module:n}=await async function(e,a){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,a)}catch(r){if("application/wasm"==e.headers.get("Content-Type"))throw r;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,a)}{const r=await WebAssembly.instantiate(e,a);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await a,r);return _=t.exports,e.__wbindgen_wasm_module=n,_}("./wasmdori_bg.wasm");const D=(e,a)=>h(v({},e),{parameter:a.target.value}),U=(e,a)=>h(v({},e),{prop:a.target.value}),J=(e,a)=>{let r=e.selectedCharacters,t=parseInt(a),n=r.includes(t)?r.filter((e=>e!=t)):r.push(t)&&r;return h(v({},e),{selectedCharacters:n})},L=(e,a)=>h(v({},e),{userProfile:a.target.value}),M=(e,a)=>h(v({},e),{propBonus:parseFloat(a.target.value)/100}),z=(e,a)=>h(v({},e),{characterBonus:parseFloat(a.target.value)/100}),H=(e,a)=>h(v({},e),{allFitBonus:parseFloat(a.target.value)/100}),G=e=>{let a={prop:e.prop,parameter:e.parameter,characters:e.selectedCharacters,prop_bonus:e.propBonus,character_bonus:e.characterBonus,all_fit_bonus:e.allFitBonus};const r=Date.now();let t=function(e,a,r,t,n){try{return E(_.gene_score(q(e),q(a),q(r),q(t),q(n)))}finally{x[N++]=void 0,x[N++]=void 0,x[N++]=void 0,x[N++]=void 0,x[N++]=void 0}}(a,e.rawCards,JSON.parse(e.userProfile),e.rawCharacters,e.rawBands);return console.log(t),console.log("Time: %d",Date.now()-r),h(v({},e),{bestTeam:t})},K=e=>s("div",{class:"row p-1"},[s("div",{class:"col"},[s("label",{for:"server"},c(e.language.selectServer)),s("select",{name:"server",id:"server",class:"form-select",onchange:i},[s("option",{value:"0"},c("日本")),s("option",{value:"1"},c("International")),s("option",{value:"2"},c("繁体中文")),s("option",{value:"3"},c("简体中文"))])])]),Q=e=>s("div",{class:"row p-1"},[s("div",{class:"col"},[s("label",{},c(e.language.selectCharacter)),s("div",{class:"col input-group"},e.characters.map((a=>{return r=e,(t=a).characterName[r.server]&&s("div",{class:"p-1"},[s("label",{for:t.id,class:"form-check-label"},c(t.characterName[r.server])),s("input",{type:"checkbox",name:t.id,class:"form-check-input",onclick:[J,t.id]})]);var r,t})))])]),V=e=>s("div",{class:"row p-1"},[s("div",{class:"col"},[s("label",{for:"user-profile"},c(e.language.userProfile)),s("textarea",{class:"form-control",name:"user-profile",onchange:L})])]),X=e=>s("div",{class:"col"},[s("label",{for:"prop"},c(e.language.selectProperty)),s("select",{name:"prop",id:"prop",class:"form-select",onchange:U},[s("option",{value:"happy"},c("Happy")),s("option",{value:"pure"},c("Pure")),s("option",{value:"cool"},c("Cool")),s("option",{value:"powerful"},c("Powerful"))])]),Y=e=>s("div",{class:"col"},[s("label",{for:"parameter"},c(e.language.selectParameter)),s("select",{name:"parameter",id:"parameter",class:"form-select",onchange:D},[s("option",{value:"performance"},c(e.language.performance)),s("option",{value:"technique"},c(e.language.technique)),s("option",{value:"visual"},c(e.language.visual))])]),Z=e=>s("div",{class:"row p-1"},[s("div",{class:"col"},[s("label",{class:"form-label"},c(e.language.propBonus)),s("div",{class:"input-group"},[s("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:M}),s("span",{class:"input-group-text"},c("%"))])]),s("div",{class:"col"},[s("label",{class:"form-label"},c(e.language.characterBonus)),s("div",{class:"input-group"},[s("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:z}),s("span",{class:"input-group-text"},c("%"))])]),s("div",{class:"col"},[s("label",{class:"form-label"},c(e.language.allFitBonus)),s("div",{class:"input-group"},[s("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:H}),s("span",{class:"input-group-text"},c("%"))])])]),$=e=>s("div",{class:"row justify-content-md-center p-1"},Object.values(e.bestTeam).map((a=>s("div",{class:"card col"},[s("img",{src:u(e.rawCards[a.card_id],a.card_id),width:"64",class:"card-img-top"}),s("ul",{class:"list-group list-group-flush"},[s("li",{class:"list-group-item text-truncate"},c(e.rawCards[a.card_id].prefix[e.server]))])]))));e({init:[{characters:[],selectedCharacters:[],server:0,language:a[r()],userProfile:"",prop:"happy",parameter:"happy",propBonus:0,characterBonus:0,allFitBonus:0,bestTeam:[],rawCharacters:{},rawBands:null,rawCards:null},t("data/characters.json",((e,a)=>{let r=[];for(const t of Object.keys(a))r.push(h(v({},a[t]),{id:t}));return h(v({},e),{characters:r,rawCharacters:a})})),t("data/bands.json",n),t("data/cards.json",o)],view:e=>s("div",{},[l(e),s("div",{class:"container"},[K(e),Q(e),V(e),s("div",{class:"row p-1"},[Y(e),X(e)]),Z(e),s("div",{class:"row p-1"},[s("div",{claas:"col"},[s("button",{class:"btn btn-primary",onclick:[G]},c(e.language.generate))])]),0!=e.bestTeam.length&&$(e)])]),node:document.getElementById("app")});
