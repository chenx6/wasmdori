var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&o(e,r,t[r]);return e},u=(e,n)=>t(e,r(n));import{a as c,h as l,t as f}from"./vendor.d8d0fb72.js";import{t as d,g as p,j as h,G as m,a as g,n as y,S as v,b as _,c as w}from"./utils.c28598db.js";var b,C=(b={}.url,function(e){var t,r;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,n){t=e,r=n}));var n,a={};for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);var i,o,s,u,c="./this.program";i="object"==typeof window,o="function"==typeof importScripts,s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,u=!i&&!s&&!o;var l,f,d,p,h,m="";s?(m=o?require("path").dirname(m)+"/":__dirname+"/",l=function(e,t){return p||(p=require("fs")),h||(h=require("path")),e=h.normalize(e),p.readFileSync(e,t?null:"utf8")},d=function(e){var t=l(e,!0);return t.buffer||(t=new Uint8Array(t)),C(t.buffer),t},process.argv.length>1&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Bt))throw e})),process.on("unhandledRejection",K),e.inspect=function(){return"[Emscripten Module object]"}):u?("undefined"!=typeof read&&(l=function(e){return read(e)}),d=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(C("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(i||o)&&(o?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),b&&(m=b),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},o&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var g,y,v=e.print||console.log.bind(console),_=e.printErr||console.warn.bind(console);for(n in a)a.hasOwnProperty(n)&&(e[n]=a[n]);a=null,e.arguments&&e.arguments,e.thisProgram&&(c=e.thisProgram),e.quit&&e.quit,e.wasmBinary&&(g=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&K("no native wasm support detected");var w=!1;function C(e,t){e||K("Assertion failed: "+t)}var P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.subarray&&P)return P.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function $(e,t){return e?T(j,e,t):""}function A(e,t,r,n){if(!(n>0))return 0;for(var a=r,i=r+n-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-a}function D(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var E,S,j,O,F,k,I,W,x,R,M="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function U(e,t){for(var r=e,n=r>>1,a=n+t/2;!(n>=a)&&F[n];)++n;if((r=n<<1)-e>32&&M)return M.decode(j.subarray(e,r));for(var i="",o=0;!(o>=t/2);++o){var s=O[e+2*o>>1];if(0==s)break;i+=String.fromCharCode(s)}return i}function H(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,a=(r-=2)<2*e.length?r/2:e.length,i=0;i<a;++i){var o=e.charCodeAt(i);O[t>>1]=o,t+=2}return O[t>>1]=0,t-n}function Y(e){return 2*e.length}function z(e,t){for(var r=0,n="";!(r>=t/4);){var a=k[e+4*r>>2];if(0==a)break;if(++r,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(a)}return n}function B(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,a=n+r-4,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),k[t>>2]=o,(t+=4)+4>a)break}return k[t>>2]=0,t-n}function V(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function N(t){E=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=O=new Int16Array(t),e.HEAP32=k=new Int32Array(t),e.HEAPU8=j=new Uint8Array(t),e.HEAPU16=F=new Uint16Array(t),e.HEAPU32=I=new Uint32Array(t),e.HEAPF32=W=new Float32Array(t),e.HEAPF64=x=new Float64Array(t)}e.INITIAL_MEMORY;var q=[],G=[],L=[],X=[];G.push({func:function(){Mt()}});var J=0,Z=null;function K(t){e.onAbort&&e.onAbort(t),_(t+=""),w=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(t);throw r(n),n}function Q(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function ee(e){return Q(e,"data:application/octet-stream;base64,")}function te(e){return Q(e,"file://")}e.preloadedImages={},e.preloadedAudios={};var re,ne="card_recognize.wasm";function ae(e){try{if(e==ne&&g)return new Uint8Array(g);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(t){K(t)}}function ie(t){for(;t.length>0;){var r=t.shift();if("function"!=typeof r){var n=r.func;"number"==typeof n?void 0===r.arg?R.get(n)():R.get(n)(r.arg):n(void 0===r.arg?null:r.arg)}else r(e)}}ee(ne)||(re=ne,ne=e.locateFile?e.locateFile(re,m):m+re);var oe=0,se=4,ue=8,ce=12,le=13,fe=16;function de(e){this.excPtr=e,this.ptr=e-fe,this.set_type=function(e){k[this.ptr+ue>>2]=e},this.get_type=function(){return k[this.ptr+ue>>2]},this.set_destructor=function(e){k[this.ptr+oe>>2]=e},this.get_destructor=function(){return k[this.ptr+oe>>2]},this.set_refcount=function(e){k[this.ptr+se>>2]=e},this.set_caught=function(e){e=e?1:0,S[this.ptr+ce>>0]=e},this.get_caught=function(){return 0!=S[this.ptr+ce>>0]},this.set_rethrown=function(e){e=e?1:0,S[this.ptr+le>>0]=e},this.get_rethrown=function(){return 0!=S[this.ptr+le>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=k[this.ptr+se>>2];k[this.ptr+se>>2]=e+1},this.release_ref=function(){var e=k[this.ptr+se>>2];return k[this.ptr+se>>2]=e-1,1===e}}function pe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var he=void 0;function me(e){for(var t="",r=e;j[r];)t+=he[j[r++]];return t}var ge={},ye={},ve={};function _e(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function we(e,t){return e=_e(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function be(e,t){var r=we(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ce=void 0;function Pe(e){throw new Ce(e)}var Te=void 0;function $e(e){throw new Te(e)}function Ae(e,t,r){function n(t){var n=r(t);n.length!==e.length&&$e("Mismatched type converter count");for(var a=0;a<e.length;++a)De(e[a],n[a])}e.forEach((function(e){ve[e]=t}));var a=new Array(t.length),i=[],o=0;t.forEach((function(e,t){ye.hasOwnProperty(e)?a[t]=ye[e]:(i.push(e),ge.hasOwnProperty(e)||(ge[e]=[]),ge[e].push((function(){a[t]=ye[e],++o===i.length&&n(a)})))})),0===i.length&&n(a)}function De(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||Pe('type "'+n+'" must have a positive integer typeid pointer'),ye.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Pe("Cannot register type '"+n+"' twice")}if(ye[e]=t,delete ve[e],ge.hasOwnProperty(e)){var a=ge[e];delete ge[e],a.forEach((function(e){e()}))}}function Ee(e){if(!(this instanceof Ye))return!1;if(!(e instanceof Ye))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,a=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return t===n&&r===a}function Se(e){Pe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var je=!1;function Oe(e){}function Fe(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function ke(e){return"undefined"==typeof FinalizationGroup?(ke=function(e){return e},e):(je=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?Fe(r):console.warn("object already deleted: "+r.ptr)}})),Oe=function(e){je.unregister(e.$$)},(ke=function(e){return je.register(e,e.$$,e.$$),e})(e))}function Ie(){if(this.$$.ptr||Se(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=ke(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function We(){this.$$.ptr||Se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Pe("Object already scheduled for deletion"),Oe(this),Fe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function xe(){return!this.$$.ptr}var Re=void 0,Me=[];function Ue(){for(;Me.length;){var e=Me.pop();e.$$.deleteScheduled=!1,e.delete()}}function He(){return this.$$.ptr||Se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Pe("Object already scheduled for deletion"),Me.push(this),1===Me.length&&Re&&Re(Ue),this.$$.deleteScheduled=!0,this}function Ye(){}var ze={};function Be(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Pe("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function Ve(t,r,n){e.hasOwnProperty(t)?((void 0===n||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[n])&&Pe("Cannot register public name '"+t+"' twice"),Be(e,t,t),e.hasOwnProperty(n)&&Pe("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),e[t].overloadTable[n]=r):(e[t]=r,void 0!==n&&(e[t].numArguments=n))}function Ne(e,t,r,n,a,i,o,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=o,this.downcast=s,this.pureVirtualFunctions=[]}function qe(e,t,r){for(;t!==r;)t.upcast||Pe("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ge(e,t){if(null===t)return this.isReference&&Pe("null is not a valid "+this.name),0;t.$$||Pe('Cannot pass "'+Tt(t)+'" as a '+this.name),t.$$.ptr||Pe("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return qe(t.$$.ptr,r,this.registeredClass)}function Le(e,t){var r;if(null===t)return this.isReference&&Pe("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||Pe('Cannot pass "'+Tt(t)+'" as a '+this.name),t.$$.ptr||Pe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Pe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=qe(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Pe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Pe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var a=t.clone();r=this.rawShare(r,Pt((function(){a.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:Pe("Unsupporting sharing policy")}return r}function Xe(e,t){if(null===t)return this.isReference&&Pe("null is not a valid "+this.name),0;t.$$||Pe('Cannot pass "'+Tt(t)+'" as a '+this.name),t.$$.ptr||Pe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Pe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return qe(t.$$.ptr,r,this.registeredClass)}function Je(e){return this.fromWireType(I[e>>2])}function Ze(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Ke(e){this.rawDestructor&&this.rawDestructor(e)}function Qe(e){null!==e&&e.delete()}function et(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=et(e,t,r.baseClass);return null===n?null:r.downcast(n)}function tt(){return Object.keys(at).length}function rt(){var e=[];for(var t in at)at.hasOwnProperty(t)&&e.push(at[t]);return e}function nt(e){Re=e,Me.length&&Re&&Re(Ue)}var at={};function it(e,t){return t=function(e,t){for(void 0===t&&Pe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),at[t]}function ot(e,t){return t.ptrType&&t.ptr||$e("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&$e("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ke(Object.create(e,{$$:{value:t}}))}function st(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=it(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?ot(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ot(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,o=this.registeredClass.getActualType(t),s=ze[o];if(!s)return a.call(this);i=this.isConst?s.constPointerType:s.pointerType;var u=et(t,this.registeredClass,i.registeredClass);return null===u?a.call(this):this.isSmartPointer?ot(i.registeredClass.instancePrototype,{ptrType:i,ptr:u,smartPtrType:this,smartPtr:e}):ot(i.registeredClass.instancePrototype,{ptrType:i,ptr:u})}function ut(e,t,r,n,a,i,o,s,u,c,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=o,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=c,this.rawDestructor=l,a||void 0!==t.baseClass?this.toWireType=Le:n?(this.toWireType=Ge,this.destructorFunction=null):(this.toWireType=Xe,this.destructorFunction=null)}function ct(t,r,n){e.hasOwnProperty(t)||$e("Replacing nonexistant public symbol"),void 0!==e[t].overloadTable&&void 0!==n?e[t].overloadTable[n]=r:(e[t]=r,e[t].argCount=n)}function lt(t,r,n){return-1!=t.indexOf("j")?function(t,r,n){var a=e["dynCall_"+t];return n&&n.length?a.apply(null,[r].concat(n)):a.call(null,r)}(t,r,n):R.get(r).apply(null,n)}function ft(e,t){var r,n,a,i=-1!=(e=me(e)).indexOf("j")?(r=e,n=t,a=[],function(){a.length=arguments.length;for(var e=0;e<arguments.length;e++)a[e]=arguments[e];return lt(r,n,a)}):R.get(t);return"function"!=typeof i&&Pe("unknown function pointer with signature "+e+": "+t),i}var dt=void 0;function pt(e){var t=zt(e),r=me(t);return Ht(t),r}function ht(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||ye[t]||(ve[t]?ve[t].forEach(e):(r.push(t),n[t]=!0))})),new dt(e+": "+r.map(pt).join([", "]))}function mt(e,t){for(var r=[],n=0;n<e;n++)r.push(k[(t>>2)+n]);return r}function gt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function yt(e,t,r,n,a){var i=t.length;i<2&&Pe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var c="void"!==t[0].name,l="",f="";for(u=0;u<i-2;++u)l+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+_e(e)+"("+l+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var p=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[Pe,n,a,gt,t[0],t[1]];for(o&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),u=0;u<i-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),m.push(t[u+2]);if(o&&(f="thisWired"+(f.length>0?", ":"")+f),d+=(c?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)d+="runDestructors(destructors);\n";else for(u=o?1:2;u<t.length;++u){var g=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(d+=g+"_dtor("+g+"); // "+t[u].name+"\n",h.push(g+"_dtor"),m.push(t[u].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",h.push(d),function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=we(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,a=e.apply(n,t);return a instanceof Object?a:n}(Function,h).apply(null,m)}var vt=[],_t=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function wt(e){e>4&&0==--_t[e].refcount&&(_t[e]=void 0,vt.push(e))}function bt(){for(var e=0,t=5;t<_t.length;++t)void 0!==_t[t]&&++e;return e}function Ct(){for(var e=5;e<_t.length;++e)if(void 0!==_t[e])return _t[e];return null}function Pt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=vt.length?vt.pop():_t.length;return _t[t]={refcount:1,value:e},t}}function Tt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function $t(e,t){switch(t){case 2:return function(e){return this.fromWireType(W[e>>2])};case 3:return function(e){return this.fromWireType(x[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function At(e,t,r){switch(t){case 0:return r?function(e){return S[e]}:function(e){return j[e]};case 1:return r?function(e){return O[e>>1]}:function(e){return F[e>>1]};case 2:return r?function(e){return k[e>>2]}:function(e){return I[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Dt(e){try{return y.grow(e-E.byteLength+65535>>>16),N(y.buffer),1}catch(t){}}var Et={};function St(){if(!St.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var t in Et)e[t]=Et[t];var r=[];for(var t in e)r.push(t+"="+e[t]);St.strings=r}return St.strings}var jt={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=jt.buffers[e];0===t||10===t?((1===e?v:_)(T(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return jt.varargs+=4,k[jt.varargs-4>>2]},getStr:function(e){return $(e)},get64:function(e,t){return e}};function Ot(e){return e%4==0&&(e%100!=0||e%400==0)}function Ft(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var kt=[31,29,31,30,31,30,31,31,30,31,30,31],It=[31,28,31,30,31,30,31,31,30,31,30,31];function Wt(e,t){for(var r=new Date(e.getTime());t>0;){var n=Ot(r.getFullYear()),a=r.getMonth(),i=(n?kt:It)[a];if(!(t>i-r.getDate()))return r.setDate(r.getDate()+t),r;t-=i-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function xt(e,t,r,n){var a=k[n+40>>2],i={tm_sec:k[n>>2],tm_min:k[n+4>>2],tm_hour:k[n+8>>2],tm_mday:k[n+12>>2],tm_mon:k[n+16>>2],tm_year:k[n+20>>2],tm_wday:k[n+24>>2],tm_yday:k[n+28>>2],tm_isdst:k[n+32>>2],tm_gmtoff:k[n+36>>2],tm_zone:a?$(a):""},o=$(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)o=o.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function d(e,t){return f(e,t,"0")}function p(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=Wt(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),a=h(r),i=h(n);return p(a,t)<=0?p(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return f(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+Ft(Ot(e.tm_year+1900)?kt:It,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:Wt(t,7-t.getDay()),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(r,n)<0){var a=Ft(Ot(n.getFullYear())?kt:It,n.getMonth()-1)-31,i=31-r.getDate()+a+n.getDate();return d(Math.ceil(i/7),2)}return 0===p(r,t)?"01":"00"},"%V":function(e){var t,r=new Date(e.tm_year+1900,0,4),n=new Date(e.tm_year+1901,0,4),a=h(r),i=h(n),o=Wt(new Date(e.tm_year+1900,0,1),e.tm_yday);return p(o,a)<0?"53":p(i,o)<=0?"01":(t=a.getFullYear()<e.tm_year+1900?e.tm_yday+32-a.getDate():e.tm_yday+1-a.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:Wt(t,0===t.getDay()?1:7-t.getDay()+1),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(r,n)<0){var a=Ft(Ot(n.getFullYear())?kt:It,n.getMonth()-1)-31,i=31-r.getDate()+a+n.getDate();return d(Math.ceil(i/7),2)}return 0===p(r,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in g)o.indexOf(u)>=0&&(o=o.replace(new RegExp(u,"g"),g[u](i)));var y,v,_,w,b,C,P,T,E=(_=o,w=!1,C=b>0?b:D(_)+1,P=new Array(C),T=A(_,P,0,P.length),w&&(P.length=T),P);return E.length>t?0:(y=E,v=e,S.set(y,v),E.length-1)}!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);he=e}(),Ce=e.BindingError=be(Error,"BindingError"),Te=e.InternalError=be(Error,"InternalError"),Ye.prototype.isAliasOf=Ee,Ye.prototype.clone=Ie,Ye.prototype.delete=We,Ye.prototype.isDeleted=xe,Ye.prototype.deleteLater=He,ut.prototype.getPointee=Ze,ut.prototype.destructor=Ke,ut.prototype.argPackAdvance=8,ut.prototype.readValueFromPointer=Je,ut.prototype.deleteObject=Qe,ut.prototype.fromWireType=st,e.getInheritedInstanceCount=tt,e.getLiveInheritedInstances=rt,e.flushPendingDeletes=Ue,e.setDelayFunction=nt,dt=e.UnboundTypeError=be(Error,"UnboundTypeError"),e.count_emval_handles=bt,e.get_first_emval=Ct;var Rt={__cxa_allocate_exception:function(e){return Ut(e+fe)+fe},__cxa_atexit:function(e,t){},__cxa_throw:function(e,t,r){throw new de(e).init(t,r),e},_embind_register_bool:function(e,t,r,n,a){var i=pe(r);De(e,{name:t=me(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:a},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=S;else if(2===r)n=O;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=k}return this.fromWireType(n[e>>i])},destructorFunction:null})},_embind_register_class:function(e,t,r,n,a,i,o,s,u,c,l,f,d){l=me(l),i=ft(a,i),s&&(s=ft(o,s)),c&&(c=ft(u,c)),d=ft(f,d);var p=_e(l);Ve(p,(function(){ht("Cannot construct "+l+" due to unbound types",[n])})),Ae([e,t,r],n?[n]:[],(function(t){var r,a;t=t[0],a=n?(r=t.registeredClass).instancePrototype:Ye.prototype;var o=we(p,(function(){if(Object.getPrototypeOf(this)!==u)throw new Ce("Use 'new' to construct "+l);if(void 0===f.constructor_body)throw new Ce(l+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new Ce("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(a,{constructor:{value:o}});o.prototype=u;var f=new Ne(l,o,u,d,r,i,s,c),h=new ut(l,f,!0,!1,!1),m=new ut(l+"*",f,!1,!1,!1),g=new ut(l+" const*",f,!1,!0,!1);return ze[e]={pointerType:m,constPointerType:g},ct(p,o),[h,m,g]}))},_embind_register_class_constructor:function(e,t,r,n,a,i){C(t>0);var o=mt(t,r);a=ft(n,a);var s=[i],u=[];Ae([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Ce("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){ht("Cannot construct "+e.name+" due to unbound types",o)},Ae([],o,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&Pe(r+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=n[e].toWireType(u,arguments[e-1]);var i=a.apply(null,s);return gt(u),n[0].fromWireType(i)},[]})),[]}))},_embind_register_class_function:function(e,t,r,n,a,i,o,s){var u=mt(r,n);t=me(t),i=ft(a,i),Ae([],[e],(function(e){var n=(e=e[0]).name+"."+t;function a(){ht("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,l=c[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(a.argCount=r-2,a.className=e.name,c[t]=a):(Be(c,t,n),c[t].overloadTable[r-2]=a),Ae([],u,(function(a){var s=yt(n,a,e,i,o);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},_embind_register_emval:function(e,t){De(e,{name:t=me(t),fromWireType:function(e){var t=_t[e].value;return wt(e),t},toWireType:function(e,t){return Pt(t)},argPackAdvance:8,readValueFromPointer:Je,destructorFunction:null})},_embind_register_float:function(e,t,r){var n=pe(r);De(e,{name:t=me(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Tt(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:$t(t,n),destructorFunction:null})},_embind_register_function:function(e,t,r,n,a,i){var o=mt(t,r);e=me(e),a=ft(n,a),Ve(e,(function(){ht("Cannot call "+e+" due to unbound types",o)}),t-1),Ae([],o,(function(r){var n=[r[0],null].concat(r.slice(1));return ct(e,yt(e,n,null,a,i),t-1),[]}))},_embind_register_integer:function(e,t,r,n,a){t=me(t),-1===a&&(a=4294967295);var i=pe(r),o=function(e){return e};if(0===n){var s=32-8*r;o=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");De(e,{name:t,fromWireType:o,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Tt(r)+'" to '+this.name);if(r<n||r>a)throw new TypeError('Passing a number "'+Tt(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+a+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:At(t,i,0!==n),destructorFunction:null})},_embind_register_memory_view:function(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function a(e){var t=I,r=t[e>>=2],a=t[e+1];return new n(E,a,r)}De(e,{name:r=me(r),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:function(e,t){var r="std::string"===(t=me(t));De(e,{name:t,fromWireType:function(e){var t,n=I[e>>2];if(r)for(var a=e+4,i=0;i<=n;++i){var o=e+4+i;if(i==n||0==j[o]){var s=$(a,o-a);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),a=o+1}}else{var u=new Array(n);for(i=0;i<n;++i)u[i]=String.fromCharCode(j[e+4+i]);t=u.join("")}return Ht(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Pe("Cannot pass non-string to std::string");var a=(r&&n?function(){return D(t)}:function(){return t.length})(),i=Ut(4+a+1);if(I[i>>2]=a,r&&n)A(t,j,i+4,a+1);else if(n)for(var o=0;o<a;++o){var s=t.charCodeAt(o);s>255&&(Ht(i),Pe("String has UTF-16 code units that do not fit in 8 bits")),j[i+4+o]=s}else for(o=0;o<a;++o)j[i+4+o]=t[o];return null!==e&&e.push(Ht,i),i},argPackAdvance:8,readValueFromPointer:Je,destructorFunction:function(e){Ht(e)}})},_embind_register_std_wstring:function(e,t,r){var n,a,i,o,s;r=me(r),2===t?(n=U,a=H,o=Y,i=function(){return F},s=1):4===t&&(n=z,a=B,o=V,i=function(){return I},s=2),De(e,{name:r,fromWireType:function(e){for(var r,a=I[e>>2],o=i(),u=e+4,c=0;c<=a;++c){var l=e+4+c*t;if(c==a||0==o[l>>s]){var f=n(u,l-u);void 0===r?r=f:(r+=String.fromCharCode(0),r+=f),u=l+t}}return Ht(e),r},toWireType:function(e,n){"string"!=typeof n&&Pe("Cannot pass non-string to C++ string type "+r);var i=o(n),u=Ut(4+i+t);return I[u>>2]=i>>s,a(n,u+4,i+t),null!==e&&e.push(Ht,u),u},argPackAdvance:8,readValueFromPointer:Je,destructorFunction:function(e){Ht(e)}})},_embind_register_void:function(e,t){De(e,{isVoid:!0,name:t=me(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},_emval_decref:wt,_emval_incref:function(e){e>4&&(_t[e].refcount+=1)},_emval_take_value:function(e,t){var r,n,a;return n="_emval_take_value",void 0===(a=ye[r=e])&&Pe(n+" has unknown type "+pt(r)),Pt((e=a).readValueFromPointer(t))},abort:function(){K()},emscripten_memcpy_big:function(e,t,r){j.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){var t,r,n=j.length,a=2147483648;if(e>a)return!1;for(var i=1;i<=4;i*=2){var o=n*(1+.2/i);if(o=Math.min(o,e+100663296),Dt(Math.min(a,((t=Math.max(e,o))%(r=65536)>0&&(t+=r-t%r),t))))return!0}return!1},environ_get:function(e,t){var r=0;return St().forEach((function(n,a){var i=t+r;k[e+4*a>>2]=i,function(e,t,r){for(var n=0;n<e.length;++n)S[t++>>0]=e.charCodeAt(n);r||(S[t>>0]=0)}(n,i),r+=n.length+1})),0},environ_sizes_get:function(e,t){var r=St();k[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),k[t>>2]=n,0},fd_close:function(e){return 0},fd_read:function(e,t,r,n){var a=jt.getStreamFromFD(e),i=jt.doReadv(a,t,r);return k[n>>2]=i,0},fd_seek:function(e,t,r,n,a){},fd_write:function(e,t,r,n){for(var a=0,i=0;i<r;i++){for(var o=k[t+8*i>>2],s=k[t+(8*i+4)>>2],u=0;u<s;u++)jt.printChar(e,j[o+u]);a+=s}return k[n>>2]=a,0},setTempRet0:function(e){},strftime_l:function(e,t,r,n){return xt(e,t,r,n)}};!function(){var t={env:Rt,wasi_snapshot_preview1:Rt};function n(t,r){var n=t.exports;e.asm=n,N((y=e.asm.memory).buffer),R=e.asm.__indirect_function_table,function(t){if(J--,e.monitorRunDependencies&&e.monitorRunDependencies(J),0==J&&Z){var r=Z;Z=null,r()}}()}function a(e){n(e.instance)}function s(e){return function(){if(!g&&(i||o)){if("function"==typeof fetch&&!te(ne))return fetch(ne,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ne+"'";return e.arrayBuffer()})).catch((function(){return ae(ne)}));if(f)return new Promise((function(e,t){f(ne,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ae(ne)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),K(e)}))}if(J++,e.monitorRunDependencies&&e.monitorRunDependencies(J),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(u){return _("Module.instantiateWasm callback failed with error: "+u),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||ee(ne)||te(ne)||"function"!=typeof fetch?s(a):fetch(ne,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(a,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),s(a)}))}))).catch(r)}();var Mt=e.___wasm_call_ctors=function(){return(Mt=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},Ut=e._malloc=function(){return(Ut=e._malloc=e.asm.malloc).apply(null,arguments)},Ht=e._free=function(){return(Ht=e._free=e.asm.free).apply(null,arguments)};e.___errno_location=function(){return(e.___errno_location=e.asm.__errno_location).apply(null,arguments)};var Yt,zt=e.___getTypeName=function(){return(zt=e.___getTypeName=e.asm.__getTypeName).apply(null,arguments)};function Bt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Vt(r){function n(){Yt||(Yt=!0,e.calledRun=!0,w||(ie(G),ie(L),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),X.unshift(t);var t;ie(X)}()))}J>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),q.unshift(t);var t;ie(q)}(),J>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.__embind_register_native_and_builtin_types).apply(null,arguments)},e._emscripten_main_thread_process_queued_calls=function(){return(e._emscripten_main_thread_process_queued_calls=e.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},e.stackSave=function(){return(e.stackSave=e.asm.stackSave).apply(null,arguments)},e.stackRestore=function(){return(e.stackRestore=e.asm.stackRestore).apply(null,arguments)},e.stackAlloc=function(){return(e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},e.___cxa_demangle=function(){return(e.___cxa_demangle=e.asm.__cxa_demangle).apply(null,arguments)},e.dynCall_ji=function(){return(e.dynCall_ji=e.asm.dynCall_ji).apply(null,arguments)},e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.dynCall_viijii).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.dynCall_jiji).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.dynCall_iiiiiijj).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.dynCall_iiiiij).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.dynCall_iiiiijj).apply(null,arguments)},Z=function e(){Yt||Vt(),Yt||(Z=e)},e.run=Vt,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Vt(),e.ready});const P=(e,t)=>u(s({},e),{screenshot:t}),T=(e,t)=>{if(t.number<0&&0==e.page)return e;const r=(e.page+1)*e.itemPerPage,n=(e.page+2)*e.itemPerPage;return t.number>0&&0==e.tableData.slice(r,n).length?e:u(s({},e),{page:e.page+t.number})},$=()=>[T,{number:-1}],A=()=>[T,{number:1}],D=e=>u(s({},e),{showImage:!e.showImage}),E=e=>(e.selectedCard.size==e.tableData.length?e.selectedCard.clear():e.tableData.forEach((t=>e.selectedCard.add(t))),u(s({},e),{selectedCard:e.selectedCard})),S=e=>{let t=document.getElementById("show-img"),r=document.getElementById("data-canvas"),n=document.getElementById("show-canvas");r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);const a=n.clientWidth,i=a/t.width,o=t.height*i;return n.width=a,n.height=o,n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,a,o),e},j=(e,t)=>{let r=new FileReader;r.onload=r=>e(t.action,r.target.result),r.readAsDataURL(t.file)},O=(e,t)=>[e,[j,{action:P,file:t.target.files[0]}]],F=(e,t)=>{if(0===e.screenshot.length)return e;let r=document.getElementById("show-img"),n=document.getElementById("show-canvas").getBoundingClientRect();const a=Math.round(r.width*(t.clientX-n.left)/n.width),i=Math.round(r.height*(t.clientY-n.top)/n.height);console.log(`click x: ${a}, y: ${i}`);let o=document.getElementById("data-canvas").getContext("2d").getImageData(0,0,r.width,r.height).data,c=e.mod._malloc(o.length);e.mod.HEAPU8.set(o,c);let l=e.mod.process(c,r.width,r.height,JSON.stringify(e.rawHashes),a,i);e.mod._free(c);let f=[];for(let s=0;s<l.size();s++)f.push(l.get(s));return u(s({},e),{tableData:f})},k=(e,t)=>u(s({},e),{selectedCard:e.selectedCard.has(t.id)?e.selectedCard.delete(t.id)&&e.selectedCard:e.selectedCard.add(t.id)}),I=e=>{let t=[];for(const r of e.selectedCard){let n=e.rawCards[r],a=n.levelLimit+(n.stat.training?10:0);t.push({id:r,level:a,exclude:!1,art:1,train:1,ep:2,skill:0})}return u(s({},e),{result:w(t)})},W=e=>l("div",{class:"row p-1"},[l("div",{class:"col"},[l("label",{for:"screenshot-select",class:"form-label"},f(e.language.selectScreenshot)),l("input",{type:"file",name:"screenshot-select",class:"form-control",onchange:O})])]),x=e=>l("div",{class:"row p-1"},[l("div",{class:"col"},[l("label",{for:"server"},f(e.language.selectServer)),l("select",{name:"server",id:"server",class:"form-select",onchange:v},[l("option",{value:"0"},f("日本")),l("option",{value:"1"},f("International")),l("option",{value:"2"},f("繁体中文")),l("option",{value:"3"},f("简体中文"))])])]),R=e=>l("tbody",{},0==e.tableData.length?[l("th",{colspan:"4"},f(e.language.waitRecognize))]:e.tableData.slice(e.page*e.itemPerPage,(e.page+1)*e.itemPerPage).map((t=>((e,t)=>{const r=e.rawCards[t];return l("tr",{},[e.showImage?l("img",{src:_(r,t),width:"64"}):l("td",{},f("...")),l("td",{},f(t)),l("td",{},f(r.prefix[e.server])),l("td",{},f(e.rawCharacters[r.characterId].characterName[e.server])),l("td",{},[l("input",{type:"checkbox",checked:e.selectedCard.has(t)?"checked":"",class:"form-check-input",onchange:[k,{id:t}]})])])})(e,t)))),M=e=>l("div",{},[l("table",{class:"table align-middle"},[l("thead",{},[l("tr",{},e.head.map((t=>l("th",{},f(e.language[t])))))]),R(e)]),l("div",{class:"input-group justify-content-md-center"},[l("button",{class:"btn btn-outline-primary",onclick:[D]},f(e.showImage?e.language.hideImage:e.language.showImage)),l("button",{class:"btn btn-outline-primary",onclick:[$]},f(e.language.prevPage)),l("button",{class:"btn btn-outline-primary",onclick:[A]},f(e.language.nextPage)),l("button",{class:"btn btn-outline-primary",onclick:[E]},f(e.language.selectAll)),l("button",{class:"btn btn-primary",onclick:[I]},f(e.language.generate))])]),U=e=>l("div",{class:"row p-1 align-items-start"},[l("p",{},f(e.language.hintText1)),l("img",{id:"show-img",src:e.screenshot,hidden:!0,onload:[S]}),l("canvas",{id:"data-canvas",hidden:!0}),l("canvas",{id:"show-canvas",class:"col-md-8 p-1",onclick:F}),l("div",{class:"col-md-4 p-1"},[M(e)]),l("p",{},f(e.language.hintText2)),l("p",{},f(e.language.hintText3))]),H=e=>l("div",{class:"row p-1"},[0!=e.result.length&&l("div",{class:"col"},[l("textarea",{class:"form-control",value:`{"name":"generated-${Date.now()}","server":${e.server},"compression":"1","data":"${e.result}",\n"items":{"Menu":[5,5,5,5],"Plaza":[5,5,5,5],"Roselia":[5,5,5,5,5,5,5],"Everyone":[5,5,5,5,5,5,5],"Magazine":[5,5,5],\n"Afterglow":[5,5,5,5,5,5,5],"PoppinParty":[5,5,5,5,5,5,5],"PastelPalettes":[5,5,5,5,5,5,5],"HelloHappyWorld":[5,5,5,5,5,5,5]}}`})])]);c({init:[{screenshot:"",language:d[p()],server:0,tableData:[],head:["cardImage","id","cardName","character","selected"],page:0,itemPerPage:10,showImage:!1,selectedCard:new Set,result:"",rawCharacters:null,rawHashes:null,rawCards:null,mod:null},h("data/characters.json",((e,t)=>u(s({},e),{rawCharacters:t}))),h("data/hashes.json",m),h("data/cards.json",g),[(e,t)=>{C().then((r=>e(t.action,r)))},{action:(e,t)=>u(s({},e),{mod:t})}]],view:e=>l("div",{},[y(e),l("div",{class:"container"},[x(e),W(e),U(e),H(e)])]),node:document.getElementById("app")});
