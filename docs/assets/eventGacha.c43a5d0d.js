var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(a,e)=>{for(var t in e||(e={}))r.call(e,t)&&n(a,t,e[t]);if(s)for(var t of s(e))l.call(e,t)&&n(a,t,e[t]);return a},d=(a,s)=>e(a,t(s));import{a as i,h as o,t as v}from"./vendor.d8d0fb72.js";import{t as p,g,j as u,a as m,n as b,b as h,f,c as w}from"./utils.b61db75d.js";const y=["★３以上確定チケットガチャ","スタートダッシュガチャ","初心者限定★4ミラクルチケットセットガチャ"],j=["birthday","special"],A=(a,e)=>{a.server=parseInt(e.target.value);return a.events.sort(((e,t)=>{const s=e.startAt[0],r=t.startAt[0],l=e.startAt[a.server],n=t.startAt[a.server];return null!==l&&null!==n?l-n:null===l&&null!==n?1:null!==l&&null===n?-1:s-r})),a=(a=>{let e=[],t=0;for(let s of a.events){let r=s.startAt[a.server];null!==r&&0===t?t=parseInt(r):(t+=6048e5,s.startAt[a.server]=t.toString());const l=parseInt(s.startAt[0]),n=parseInt(s.endAt[0]);let c=[];for(const e of Object.values(a.gachas)){const a=parseInt(e.publishedAt[0]),t=parseInt(e.closedAt[0]);a<=n&&l<=t&&!j.includes(e.type)&&!y.includes(e.gachaName[0])&&c.push(e)}c.sort(((a,e)=>a.publishedAt[0]-e.publishedAt[0])),e.push({event:s,gachas:c})}return d(c({},a),{eventGachaPair:e})})(a),c({},a)},I=a=>new Intl.DateTimeFormat("zh-CN",{dateStyle:"full"}).format(new Date(parseInt(a))),O=(a,e)=>d(c({},a),{startEvent:parseInt(e.target.value)}),C=(a,e)=>d(c({},a),{pageCount:parseInt(e.target.value)}),N=(a,e,t,s,r=!1)=>o("div",{class:"col-auto p-2"},[o("div",{class:"game-card-container"},[o("img",{src:w(a,e,r),class:"game-card",loading:"lazy"}),o("div",{class:`game-card-border game-card-border-${a.rarity}`}),o("div",{class:`game-card-band game-card-band-${t.bandId}`}),o("div",{class:`game-card-prop game-card-prop-${a.attribute}`}),...s])]),S=(a,e)=>{const t=a.rawCards[e],s=a.characters[t.characterId],r=a.rawSkills[t.skillId];let l=[],n=[];for(let c=1;c<=t.rarity;c++)l.push(o("div",{class:`game-card-star game-card-star-p${c}`})),n.push(o("div",{class:`game-card-star-trained game-card-star-p${c}`}));return o("div",{class:"card mb-3"},[o("div",{class:"row g-0 align-items-center"},[N(t,e,s,l),t.rarity>2?N(t,e,s,n,!0):o("div",{class:"col-auto p-2"},[o("img",{width:"68"})]),o("div",{class:"col-auto p-2"},[o("div",{class:""},[o("div",{class:"card-text"},v(s.characterName[a.server])),o("div",{class:"card-text"},v(t.prefix[1])),o("div",{class:"card-text"},v(r.simpleDescription[a.server]))])])])])},P=a=>o("div",{},a.eventGachaPair.slice(a.startEvent,a.startEvent+a.pageCount).map((e=>((a,{event:e,gachas:t})=>o("div",{class:"row p-1"},[o("div",{class:"col-md-6"},[o("div",{class:"card"},[o("img",{src:f("jp",e.bannerAssetBundleName),alt:a.language.loading,loading:"lazy",class:"banner"}),o("div",{class:"card-body"},[o("b",{class:"card-title"},v(e.eventName[1])),o("div",{},v(I(e.startAt[a.server]))),...e.rewardCards.map((e=>S(a,e)))])])]),o("div",{class:"col-md-6"},[o("div",{class:"card"},t.map((e=>[o("img",{src:f("jp",e.bannerAssetBundleName),alt:a.language.loading,loading:"lazy",class:"banner"}),o("div",{class:"card-body"},[o("b",{class:"card-title"},v(e.gachaName[1])),o("div",{},v(I(e.publishedAt[0]))),...e.newCards.map((e=>S(a,e)))])])).flat())])]))(a,e)))),E=a=>o("div",{class:"row p-1"},[o("div",{class:"col"},[o("label",{},v(a.language.startEvent)),o("select",{class:"form-select",onchange:O},[...a.events.map(((e,t)=>o("option",{value:t.toString()},v(e.eventName[a.server]?e.eventName[a.server]:e.eventName[0]))))])])]),k=a=>o("div",{class:"row p-1"},[o("div",{class:"col"},[o("label",{},v(a.language.pageCount)),o("select",{class:"form-control",onchange:C},[...[3,5,7,10].map((a=>o("option",{value:a.toString()},v(a.toString()))))])])]);i({init:[{gachas:null,events:null,rawCards:null,characters:null,rawSkills:null,server:0,startEvent:0,pageCount:3,language:p[g()],eventGachaPair:[]},u("data/events.json",((a,e)=>d(c({},a),{events:Object.values(e)}))),u("data/gachas.json",((a,e)=>d(c({},a),{gachas:e}))),u("data/cards.json",m),u("data/characters.json",((a,e)=>d(c({},a),{characters:e}))),u("data/skills.json",((a,e)=>d(c({},a),{rawSkills:e})))],view:a=>o("div",{class:"container"},[b(a),h(a,A),a.events&&E(a),k(a),a.gachas&&a.events&&a.rawCards&&a.characters&&a.rawSkills&&0!==a.eventGachaPair.length&&P(a)]),node:document.getElementById("app")});
