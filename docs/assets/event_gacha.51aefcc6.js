var a=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,s,t)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,n=(a,e)=>{for(var s in e||(e={}))r.call(e,s)&&c(a,s,e[s]);if(t)for(var s of t(e))l.call(e,s)&&c(a,s,e[s]);return a},d=(a,t)=>e(a,s(t));import{a as i,h as o,t as v}from"./vendor.d8d0fb72.js";import{t as p,g,j as m,a as u,n as b,b as h,f,c as w}from"./utils.d05fb4bd.js";const y=["★３以上確定チケットガチャ","スタートダッシュガチャ","初心者限定★4ミラクルチケットセットガチャ"],j=["birthday","special"],I=(a,e)=>(a.server=parseInt(e.target.value),a=(a=>{let e=[],s=0,t=Object.values(a.events);for(let r of t){let t=r.startAt[a.server];null!==t&&0===s?s=parseInt(t):(s+=6048e5,r.startAt[a.server]=s.toString());const l=parseInt(r.startAt[0]),c=parseInt(r.endAt[0]);let n=[];for(const e of Object.values(a.gachas)){const a=parseInt(e.publishedAt[0]),s=parseInt(e.closedAt[0]);a<=c&&l<=s&&!j.includes(e.type)&&!y.includes(e.gachaName[0])&&n.push(e)}n.sort(((a,e)=>a.publishedAt[0]-e.publishedAt[0])),e.push({event:r,gachas:n})}return d(n({},a),{eventGachaPair:e})})(a),n({},a)),A=a=>new Intl.DateTimeFormat("zh-CN",{dateStyle:"full"}).format(new Date(parseInt(a))),O=(a,e)=>d(n({},a),{startEvent:parseInt(e.target.value)}),C=(a,e)=>d(n({},a),{pageCount:parseInt(e.target.value)}),N=(a,e,s,t,r=!1)=>o("div",{class:"col-md-auto p-2"},[o("div",{class:"game-card-container"},[o("img",{src:w(a,e,r),class:"game-card",loading:"lazy"}),o("div",{class:`game-card-border game-card-border-${a.rarity}`}),o("div",{class:`game-card-band game-card-band-${s.bandId}`}),o("div",{class:`game-card-prop game-card-prop-${a.attribute}`}),...t])]),S=(a,e)=>{const s=a.rawCards[e],t=a.characters[s.characterId],r=a.rawSkills[s.skillId];let l=[],c=[];for(let n=1;n<=s.rarity;n++)l.push(o("div",{class:`game-card-star game-card-star-p${n}`})),c.push(o("div",{class:`game-card-star-trained game-card-star-p${n}`}));return o("div",{class:"card mb-3"},[o("div",{class:"row g-0 align-items-center"},[N(s,e,t,l),s.rarity>2?N(s,e,t,c,!0):o("div",{class:"col-md-auto p-2"},[o("img",{width:"68"})]),o("div",{class:"col-md-8"},[o("div",{class:""},[o("div",{class:"card-text"},v(t.characterName[a.server])),o("div",{class:"card-text"},v(s.prefix[1])),o("div",{class:"card-text"},v(r.simpleDescription[a.server]))])])])])},P=a=>o("div",{},a.eventGachaPair.slice(a.startEvent,a.startEvent+a.pageCount).map((e=>((a,{event:e,gachas:s})=>o("div",{class:"row p-1"},[o("div",{class:"col"},[o("div",{class:"card"},[o("img",{src:f("jp",e.bannerAssetBundleName),alt:a.language.loading,loading:"lazy",class:"banner"}),o("div",{class:"card-body"},[o("b",{class:"card-title"},v(e.eventName[1])),o("div",{},v(A(e.startAt[a.server]))),...e.rewardCards.map((e=>S(a,e)))])])]),o("div",{class:"col"},[o("div",{class:"card"},s.map((e=>[o("img",{src:f("jp",e.bannerAssetBundleName),alt:a.language.loading,loading:"lazy",class:"banner"}),o("div",{class:"card-body"},[o("b",{class:"card-title"},v(e.gachaName[1])),o("div",{},v(A(e.publishedAt[0]))),...e.newCards.map((e=>S(a,e)))])])).flat())])]))(a,e)))),E=a=>o("div",{class:"row p-1"},[o("div",{class:"col"},[o("label",{},v(a.language.startEvent)),o("select",{class:"form-select",onchange:O},[...Object.values(a.events).map(((e,s)=>o("option",{value:s.toString()},v(e.eventName[a.server]?e.eventName[a.server]:e.eventName[0]))))])])]),k=a=>o("div",{class:"row p-1"},[o("div",{class:"col"},[o("label",{},v(a.language.pageCount)),o("select",{class:"form-control",onchange:C},[...[3,5,7,10].map((a=>o("option",{value:a.toString()},v(a.toString()))))])])]);i({init:[{gachas:null,events:null,rawCards:null,characters:null,rawSkills:null,server:0,startEvent:0,pageCount:3,language:p[g()],eventGachaPair:[]},m("data/events.json",((a,e)=>d(n({},a),{events:e}))),m("data/gachas.json",((a,e)=>d(n({},a),{gachas:e}))),m("data/cards.json",u),m("data/characters.json",((a,e)=>d(n({},a),{characters:e}))),m("data/skills.json",((a,e)=>d(n({},a),{rawSkills:e})))],view:a=>o("div",{class:"container"},[b(a),h(a,I),a.events&&E(a),k(a),a.gachas&&a.events&&a.rawCards&&a.characters&&a.rawSkills&&0!==a.eventGachaPair.length&&P(a)]),node:document.getElementById("app")});
