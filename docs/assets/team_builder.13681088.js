var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,l=(e,a)=>{for(var r in a||(a={}))n.call(a,r)&&o(e,r,a[r]);if(t)for(var r of t(a))s.call(a,r)&&o(e,r,a[r]);return e},c=(e,t)=>a(e,r(t));const i={};import{a as u,h as p,t as f}from"./vendor.d8d0fb72.js";import{t as d,g,j as b,d as m,a as w,n as v,S as h,b as y}from"./utils.604532cb.js";let _,j=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});j.decode();let B=null;function C(){return null!==B&&B.buffer===_.memory.buffer||(B=new Uint8Array(_.memory.buffer)),B}function O(e,a){return j.decode(C().subarray(e,e+a))}const x=new Array(32).fill(void 0);x.push(void 0,null,!0,!1);let P=x.length;function k(e){P===x.length&&x.push(x.length+1);const a=P;return P=x[a],x[a]=e,a}function A(e){return x[e]}let I=0,S=new TextEncoder("utf-8");const F="function"==typeof S.encodeInto?function(e,a){return S.encodeInto(e,a)}:function(e,a){const r=S.encode(e);return a.set(r),{read:e.length,written:r.length}};function T(e,a,r){if(void 0===r){const r=S.encode(e),t=a(r.length);return C().subarray(t,t+r.length).set(r),I=r.length,t}let t=e.length,n=a(t);const s=C();let o=0;for(;o<t;o++){const a=e.charCodeAt(o);if(a>127)break;s[n+o]=a}if(o!==t){0!==o&&(e=e.slice(o)),n=r(n,t,t=o+3*e.length);const a=C().subarray(n+o,n+t);o+=F(e,a).written}return I=o,n}let R=null;function W(){return null!==R&&R.buffer===_.memory.buffer||(R=new Int32Array(_.memory.buffer)),R}function E(e){const a=A(e);return function(e){e<36||(x[e]=P,P=e)}(e),a}let N=32;function q(e){if(1==N)throw new Error("out of js stack");return x[--N]=e,N}!async function e(a){void 0===a&&(a=new URL("wasmdori_bg.wasm",i.url));const r={wbg:{}};r.wbg.__wbindgen_json_parse=function(e,a){return k(JSON.parse(O(e,a)))},r.wbg.__wbindgen_json_serialize=function(e,a){const r=A(a);var t=T(JSON.stringify(void 0===r?null:r),_.__wbindgen_malloc,_.__wbindgen_realloc),n=I;W()[e/4+1]=n,W()[e/4+0]=t},r.wbg.__wbg_new_59cb74e423758ede=function(){return k(new Error)},r.wbg.__wbg_stack_558ba5917b466edd=function(e,a){var r=T(A(a).stack,_.__wbindgen_malloc,_.__wbindgen_realloc),t=I;W()[e/4+1]=t,W()[e/4+0]=r},r.wbg.__wbg_error_4bb6c2a97407129a=function(e,a){try{console.error(O(e,a))}finally{_.__wbindgen_free(e,a)}},r.wbg.__wbindgen_object_drop_ref=function(e){E(e)},("string"==typeof a||"function"==typeof Request&&a instanceof Request||"function"==typeof URL&&a instanceof URL)&&(a=fetch(a));const{instance:t,module:n}=await async function(e,a){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,a)}catch(r){if("application/wasm"==e.headers.get("Content-Type"))throw r;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,a)}{const r=await WebAssembly.instantiate(e,a);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await a,r);return _=t.exports,e.__wbindgen_wasm_module=n,_}("./wasmdori_bg.wasm");const D=(e,a)=>c(l({},e),{parameter:a.target.value}),U=(e,a)=>c(l({},e),{prop:a.target.value}),J=(e,a)=>{let r=e.selectedCharacters,t=parseInt(a),n=r.includes(t)?r.filter((e=>e!=t)):r.push(t)&&r;return c(l({},e),{selectedCharacters:n})},L=(e,a)=>c(l({},e),{userProfile:a.target.value}),M=(e,a)=>c(l({},e),{propBonus:parseFloat(a.target.value)/100}),z=(e,a)=>c(l({},e),{characterBonus:parseFloat(a.target.value)/100}),H=(e,a)=>c(l({},e),{allFitBonus:parseFloat(a.target.value)/100}),G=e=>{if(5!=e.selectedCharacters.length)return e;let a={prop:e.prop,parameter:e.parameter,characters:e.selectedCharacters,prop_bonus:e.propBonus,character_bonus:e.characterBonus,all_fit_bonus:e.allFitBonus};const r=Date.now();let t=function(e,a,r,t,n){try{return E(_.gene_score(q(e),q(a),q(r),q(t),q(n)))}finally{x[N++]=void 0,x[N++]=void 0,x[N++]=void 0,x[N++]=void 0,x[N++]=void 0}}(a,e.rawCards,JSON.parse(e.userProfile),e.rawCharacters,e.rawBands);return console.log("Time: %d",Date.now()-r),c(l({},e),{bestTeam:t})},K=e=>p("div",{class:"row p-1"},[p("div",{class:"col"},[p("label",{for:"server"},f(e.language.selectServer)),p("select",{name:"server",id:"server",class:"form-select",onchange:h},[p("option",{value:"0"},f("日本")),p("option",{value:"1"},f("International")),p("option",{value:"2"},f("繁体中文")),p("option",{value:"3"},f("简体中文"))])])]),Q=e=>p("div",{class:"row p-1"},[p("div",{class:"col"},[p("label",{},f(e.language.selectCharacter)),p("div",{class:"col input-group"},e.characters.map((a=>((e,a)=>a.characterName[e.server]&&p("div",{class:"p-1"},[p("label",{for:a.id,class:"form-check-label"},f(a.characterName[e.server])),p("input",{type:"checkbox",name:a.id,class:"form-check-input",onclick:[J,a.id]})]))(e,a))))])]),V=e=>p("div",{class:"row p-1"},[p("div",{class:"col"},[p("label",{for:"user-profile"},f(e.language.userProfile)),p("textarea",{class:"form-control",name:"user-profile",onchange:L})])]),X=e=>p("div",{class:"col"},[p("label",{for:"prop"},f(e.language.selectProperty)),p("select",{name:"prop",id:"prop",class:"form-select",onchange:U},[p("option",{value:"happy"},f("Happy")),p("option",{value:"pure"},f("Pure")),p("option",{value:"cool"},f("Cool")),p("option",{value:"powerful"},f("Powerful"))])]),Y=e=>p("div",{class:"col"},[p("label",{for:"parameter"},f(e.language.selectParameter)),p("select",{name:"parameter",id:"parameter",class:"form-select",onchange:D},[p("option",{value:"performance"},f(e.language.performance)),p("option",{value:"technique"},f(e.language.technique)),p("option",{value:"visual"},f(e.language.visual))])]),Z=e=>p("div",{class:"row p-1"},[p("div",{class:"col"},[p("label",{class:"form-label"},f(e.language.propBonus)),p("div",{class:"input-group"},[p("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:M}),p("span",{class:"input-group-text"},f("%"))])]),p("div",{class:"col"},[p("label",{class:"form-label"},f(e.language.characterBonus)),p("div",{class:"input-group"},[p("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:z}),p("span",{class:"input-group-text"},f("%"))])]),p("div",{class:"col"},[p("label",{class:"form-label"},f(e.language.allFitBonus)),p("div",{class:"input-group"},[p("input",{type:"number",step:"10",min:"0",max:"100",class:"form-control",onchange:H}),p("span",{class:"input-group-text"},f("%"))])])]),$=e=>p("div",{class:"row justify-content-md-center p-1"},Object.values(e.bestTeam).map((a=>p("div",{class:"card col"},[p("img",{src:y(e.rawCards[a.card_id],a.card_id),width:"64",class:"card-img-top"}),p("ul",{class:"list-group list-group-flush"},[p("li",{class:"list-group-item text-truncate"},f(e.rawCards[a.card_id].prefix[e.server]))])]))));u({init:[{characters:[],selectedCharacters:[],server:0,language:d[g()],userProfile:"",prop:"happy",parameter:"happy",propBonus:0,characterBonus:0,allFitBonus:0,bestTeam:[],rawCharacters:{},rawBands:null,rawCards:null},b("data/characters.json",((e,a)=>{let r=[];for(const t of Object.keys(a))r.push(c(l({},a[t]),{id:t}));return c(l({},e),{characters:r,rawCharacters:a})})),b("data/bands.json",m),b("data/cards.json",w)],view:e=>p("div",{},[v(e),p("div",{class:"container"},[K(e),Q(e),V(e),p("div",{class:"row p-1"},[Y(e),X(e)]),Z(e),p("div",{class:"row p-1"},[p("div",{claas:"col"},[p("button",{class:"btn btn-primary",onclick:[G]},f(e.language.generate))])]),0!=e.bestTeam.length&&$(e)])]),node:document.getElementById("app")});
